<html>
<head>
<script type="text/javascript">

var clientURL = 'http://localhost:5001';
var serverURL = 'http://localhost:3000/tvguide';


var startDate= new Date(2010, 12, 21, 5, 00, 0, 0), // today 5am
    nowDate = new Date();
var startTime = startDate.getTime(),
    nowTime = nowDate.getTime();

function testTime() {
	if (nowTime > startTime) {
		setTimeout(function(){
			//request(serverURL);
			//request(clientURL);
			window.location.href = clientURL;
		}, 15000)
		
	} else {
		// test every minute
		setTimeout(testTime, 60000)
	}
}
testTime();

var bothserversup = -2;

function request(url) {
  const xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function(e) {
    if (xhr.readyState === 4) {

      if (xhr.status === 200) {
        bothserversup++;

        if (bothserversup == 0) {
            // gotoclient
            window.location.href = clientURL;
        }
      } else {
        setTimeout(function(){
            request(url)
        }, 3000);
      }
    }
  }
  xhr.open('GET', url)
  xhr.send();
}


</script>
<style>
	body {
		background: #000 url('./cardimages/testpattern.png') center center;
		background-size: cover;
	}
</style>
</head>
<body>
	
</body>
</html>
